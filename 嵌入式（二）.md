<h1><center>嵌入式（二）</center></h1>

这周的嵌入式，主要讲的是动态库和静态库。

当我们给别人代码的时候，给的不是源代码，而是库和头文件。库分为动态库和静态库。

## 一、库

什么是库？

库：可以复用的、对用户透明的二进制代码块。用户只要使用库提供的API即可解决特定的问题。

所谓静态库与动态库中的<b>静态</b>与<b>动态</b>指的是链接的方式。



## 二、静态库

1. 静态库即静态链接库。使用该库的程序在编译时被加载进程序中。
2. 静态库要求在程序链接的时候要存在
3. 优点
   * 减少对外部环境的依赖
4. 缺点
   * 程序大小容易过大



## 三、动态库

1. 动态库即动态链接库。使用该库的程序在编译时仅存储一个指向该库的引用。当该程序运行时才将该库加载进程序中。
2. 动态库要求在程序运行的时候要存在
3. 优点
   * 可以在程序运行前更换使用的库
4. 缺点
   * 依赖外部环境，如果外部环境中缺少对应的`.dll`文件，程序就无法运行



## 四、静态库和动态库的区别

#### 1. 可执行文件的大小

静态链接的可执行文件要比动态链接的可执行文件大，因为静态链接的可执行程序需要将用到的代码复制一份到程序中。而动态链接的程序仅仅是复制了一些重定位和符号表消息

#### 2. 占用磁盘大小

如果有多个可执行文件，那么静态库的代码会被复制多份，而动态库的代码始终只有一份。因此静态库占用的磁盘空间比动态库占用的磁盘空间更大

#### 3. 扩展性与兼容性

如果静态库中的某个函数实现发生了变化，那么使用该库的程序需要重新编译，而动态链接的程序不需要重新编译可执行文件。因此，使用动态链接的可执行程序更方便扩展。

#### 4. 外部环境依赖

静态链接的可执行文件不需要依赖其他的内容即可运行，而动态链接的可执行程序必须依赖动态库，当外部环境中不存在使用到的动态链接库时，程序将无法执行。

#### 5. 复杂性

动态库一般情况下比静态库更复杂。

#### 6. 加载速度

由于静态库在编译时已经被加载进程序中了，而动态链接库在程序运行时需要链接。因此，使用静态链接库的程序在运行时更快。